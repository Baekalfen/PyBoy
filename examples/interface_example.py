#
# License: See LICENSE file
# GitHub: https://github.com/Baekalfen/PyBoy
#

import sys
from pprint import pprint

from pyboy import PyBoy

hide_window = "--quiet" in sys.argv

pyboy = PyBoy(
        "ROMs/POKEMON BLUE.gb",
        debugging=False,
        disable_input=True,
        # window_type="headless", # For unattended use, for example machine learning
        hide_window=hide_window,
    )
pyboy.set_emulation_speed(0)

for n in range(1000): # Move ahead the desired number of frames.
    pyboy.tick()

tile_map = pyboy.get_window_tile_map() # Get the TileView object for the window.

# The following prints out the indices of each tile in the window -- excluding sprites and the background!
print(tile_map)
# Tile Map Address: 0x9c00, Signed Tile Data: No
#      0   1   2   3   4   5   6   7   8   9   10  11  12  13  14  15  16  17  18  19  20  21  22  23  24  25  26  27  28  29  30  31
# __________________________________________________________________________________________________________________________________
# 0  | 1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
# 1  | 1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
# 2  | 1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
# 3  | 1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
# 4  | 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
# 5  | 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
# 6  | 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
# 7  | 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
# 8  | 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   25  0   0   0   0   0   0   0   0   0   0   0   0   0
# 9  | 0   0   0   0   0   0   0   0   0   0   0   0   0   2   6   11  16  20  26  0   0   0   0   0   0   0   0   0   0   0   0   0
# 10 | 0   0   0   0   0   0   0   0   0   0   0   0   0   0   7   12  17  21  27  0   0   0   0   0   0   0   0   0   0   0   0   0
# 11 | 0   0   0   0   0   0   0   0   0   0   0   0   0   3   8   13  18  22  28  0   0   0   0   0   0   0   0   0   0   0   0   0
# 12 | 0   0   0   0   0   0   0   0   0   0   0   0   0   4   9   14  19  23  29  31  0   0   0   0   0   0   0   0   0   0   0   0
# 13 | 0   0   0   0   0   0   0   0   0   0   0   0   0   5   10  15  1   24  30  32  0   0   0   0   0   0   0   0   0   0   0   0
# 14 | 1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
# 15 | 1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
# 16 | 1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
# 17 | 1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1   1
# 18 | 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127
# 19 | 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127
# 20 | 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127
# 21 | 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127
# 22 | 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127
# 23 | 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127
# 24 | 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127
# 25 | 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127
# 26 | 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127
# 27 | 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127
# 28 | 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127
# 29 | 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127
# 30 | 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127
# 31 | 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127 127

index_map = tile_map.get_tile_matrix()

# Isolating the part with Snorlax -- The indexes are found in the print-out above
pprint(list(tile_map[13:20, 8:14]))
# [[0, 0, 0, 0, 0, 25, 0],
#  [2, 6, 11, 16, 20, 26, 0],
#  [0, 7, 12, 17, 21, 27, 0],
#  [3, 8, 13, 18, 22, 28, 0],
#  [4, 9, 14, 19, 23, 29, 31],
#  [5, 10, 15, 1, 24, 30, 32]]

# For unattended use, the screen buffer can be displayed using the following:
screen_image = pyboy.get_screen_image()
if not hide_window:
    screen_image.show()
